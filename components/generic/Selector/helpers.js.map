{"version":3,"sources":["../../../src/replay/components/generic/Selector/helpers.js"],"names":["selectItemClasses","classes","selectorItem","selectItemSelectedClasses","selectorItemSelected","SelectorItem","React","Component","element","props","onRef","index","onSelect","item","data","keyboardEvent","key","preventDefault","handleClick","render","className","classNamePrefix","defaultItemClassName","isSelected","canReceiveFocus","selectedClassName","label","classNames","selectClasses","tabIndex","undefined","handleRef","handleKeyDown","handleKeyUp","focusElement","upwards","isReverseOrder","items","baseElement","elements","slice","reverse","concat","i","length","document","activeElement","j","focus"],"mappings":";;;;;;;;AACA;;AACA;;;;;;;;AAoBA,MAAMA,iBAAiB,GAAGC,OAAO,IAAIA,OAAO,CAACC,YAA7C;;AACA,MAAMC,yBAAyB,GAAGF,OAAO,IAAIA,OAAO,CAACG,oBAAR,IAAgCH,OAAO,CAACC,YAArF;;AAEO,MAAMG,YAAN,SAA2BC,KAAK,CAACC,SAAjC,CAA8D;AAAA;AAAA;;AAAA,uCACtDC,OAAD,IAA2B;AACrC,WAAKC,KAAL,CAAWC,KAAX,CAAiBF,OAAjB,EAA0B,KAAKC,KAAL,CAAWE,KAArC;AACD,KAHkE;;AAAA,yCAKrD,MAAM,KAAKF,KAAL,CAAWG,QAAX,IAAuB,KAAKH,KAAL,CAAWG,QAAX,CAAoB,KAAKH,KAAL,CAAWI,IAAX,CAAgBC,IAApC,CALwB;;AAAA,2CAOnD,wCAA2B,CAAC,OAAD,EAAU,GAAV,CAA3B,CAPmD;;AAAA,yCASpDC,aAAD,IAAkC;AAC9C,UAAIA,aAAa,CAACC,GAAd,KAAsB,OAAtB,IAAiCD,aAAa,CAACC,GAAd,KAAsB,GAA3D,EAAgE;AAC9DD,QAAAA,aAAa,CAACE,cAAd;AACA,aAAKC,WAAL;AACD;AACF,KAdkE;AAAA;;AAgBnEC,EAAAA,MAAM,GAAG;AAAA,wBAUH,KAAKV,KAVF;AAAA,UAELW,SAFK,eAELA,SAFK;AAAA,UAGLC,eAHK,eAGLA,eAHK;AAAA,UAILpB,OAJK,eAILA,OAJK;AAAA,UAKLqB,oBALK,eAKLA,oBALK;AAAA,UAMLT,IANK,eAMLA,IANK;AAAA,UAOLU,UAPK,eAOLA,UAPK;AAAA,UAQLC,eARK,eAQLA,eARK;AAAA,UASLC,iBATK,eASLA,iBATK;AAAA,UAWCC,KAXD,GAWWb,IAXX,CAWCa,KAXD;AAYP,UAAMC,UAAU,GAAG,+BAAkB;AACnC1B,MAAAA,OADmC;AAEnCoB,MAAAA,eAFmC;AAGnCO,MAAAA,aAAa,EAAEL,UAAU,GAAGpB,yBAAH,GAA+BH,iBAHrB;AAInC2B,MAAAA,UAAU,EAAE,CAACP,SAAD,EAAYE,oBAAZ,EAAkCC,UAAU,GAAGE,iBAAH,GAAuB,IAAnE;AAJuB,KAAlB,CAAnB;AAMA,UAAMI,QAAQ,GAAGL,eAAe,GAAG,CAAH,GAAOM,SAAvC;AACA,wBACE;AACE,MAAA,IAAI,EAAC,QADP;AAEE,uBAAeP,UAFjB;AAGE,MAAA,SAAS,EAAEI,UAHb;AAIE,MAAA,GAAG,EAAE,KAAKI,SAJZ;AAKE,MAAA,OAAO,EAAE,KAAKb,WALhB;AAME,MAAA,SAAS,EAAE,KAAKc,aANlB;AAOE,MAAA,OAAO,EAAE,KAAKC,WAPhB;AAQE,MAAA,QAAQ,EAAEJ;AARZ,oBASE;AAAK,MAAA,QAAQ,EAAE,CAAC;AAAhB,OAAoBH,KAApB,CATF,CADF;AAaD;;AAhDkE;;;;AAmD9D,SAASQ,YAAT,CACLC,OADK,EAELC,cAFK,EAGLC,KAHK,EAILC,WAJK,EAKL;AACA,QAAMC,QAAQ,GAAG,CAACH,cAAc,GAAGC,KAAK,CAACG,KAAN,CAAY,CAAZ,EAAeC,OAAf,EAAH,GAA8BJ,KAA7C,EAAoDK,MAApD,CAA2DJ,WAA3D,CAAjB;;AACA,OAAK,IAAIK,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,QAAQ,CAACK,MAA7B,EAAqCD,CAAC,EAAtC,EAA0C;AACxC,QAAIJ,QAAQ,CAACI,CAAD,CAAR,KAAgBE,QAAQ,CAACC,aAA7B,EAA4C;AAC1C,UAAIX,OAAJ,EAAa;AACX,YAAIQ,CAAC,GAAG,CAAR,EAAW;AACT,eAAK,IAAII,CAAC,GAAGJ,CAAC,GAAG,CAAjB,EAAoBI,CAAC,IAAI,CAAzB,EAA4BA,CAAC,EAA7B,EAAiC;AAC/B,kBAAMvC,OAAO,GAAG+B,QAAQ,CAACQ,CAAD,CAAxB;;AACA,gBAAIvC,OAAJ,EAAa;AACXA,cAAAA,OAAO,CAACwC,KAAR;AACA,qBAAOxC,OAAP;AACD;AACF;AACF;AACF,OAVD,MAUO;AACL,YAAImC,CAAC,GAAGJ,QAAQ,CAACK,MAAT,GAAkB,CAA1B,EAA6B;AAC3B,eAAK,IAAIG,CAAC,GAAGJ,CAAC,GAAG,CAAjB,EAAoBI,CAAC,GAAGR,QAAQ,CAACK,MAAjC,EAAyCG,CAAC,EAA1C,EAA8C;AAC5C,kBAAMvC,OAAO,GAAG+B,QAAQ,CAACQ,CAAD,CAAxB;;AACA,gBAAIvC,OAAJ,EAAa;AACXA,cAAAA,OAAO,CAACwC,KAAR;AACA,qBAAOxC,OAAP;AACD;AACF;AACF;AACF;AACF;AACF;AACF","sourcesContent":["// @flow\nimport * as React from 'react';\nimport { getKeyboardShortcutBlocker, hydrateClassNames } from '../../common';\nimport type { CommonGenericProps, Id } from '../../common';\n\nexport type ItemData = {\n  label: string,\n  id?: Id,\n  data?: any\n};\n\ntype SelectorItemProps = CommonGenericProps & {\n  item: ItemData,\n  index: number,\n  isSelected: boolean,\n  canReceiveFocus: boolean,\n  defaultItemClassName: string,\n  selectedClassName: string,\n  onSelect?: any => void,\n  onRef: (?HTMLElement, number) => void\n};\n\nconst selectItemClasses = classes => classes.selectorItem;\nconst selectItemSelectedClasses = classes => classes.selectorItemSelected || classes.selectorItem;\n\nexport class SelectorItem extends React.Component<SelectorItemProps> {\n  handleRef = (element: ?HTMLElement) => {\n    this.props.onRef(element, this.props.index);\n  };\n\n  handleClick = () => this.props.onSelect && this.props.onSelect(this.props.item.data);\n\n  handleKeyDown = getKeyboardShortcutBlocker(['Enter', ' ']);\n\n  handleKeyUp = (keyboardEvent: KeyboardEvent) => {\n    if (keyboardEvent.key === 'Enter' || keyboardEvent.key === ' ') {\n      keyboardEvent.preventDefault();\n      this.handleClick();\n    }\n  };\n\n  render() {\n    const {\n      className,\n      classNamePrefix,\n      classes,\n      defaultItemClassName,\n      item,\n      isSelected,\n      canReceiveFocus,\n      selectedClassName\n    } = this.props;\n    const { label } = item;\n    const classNames = hydrateClassNames({\n      classes,\n      classNamePrefix,\n      selectClasses: isSelected ? selectItemSelectedClasses : selectItemClasses,\n      classNames: [className, defaultItemClassName, isSelected ? selectedClassName : null]\n    });\n    const tabIndex = canReceiveFocus ? 0 : undefined;\n    return (\n      <div\n        role=\"option\"\n        aria-selected={isSelected}\n        className={classNames}\n        ref={this.handleRef}\n        onClick={this.handleClick}\n        onKeyDown={this.handleKeyDown}\n        onKeyUp={this.handleKeyUp}\n        tabIndex={tabIndex}>\n        <div tabIndex={-1}>{label}</div>\n      </div>\n    );\n  }\n}\n\nexport function focusElement(\n  upwards: boolean,\n  isReverseOrder: boolean,\n  items: Array<?HTMLElement>,\n  baseElement: ?HTMLElement\n) {\n  const elements = (isReverseOrder ? items.slice(0).reverse() : items).concat(baseElement);\n  for (let i = 0; i < elements.length; i++) {\n    if (elements[i] === document.activeElement) {\n      if (upwards) {\n        if (i > 0) {\n          for (let j = i - 1; j >= 0; j--) {\n            const element = elements[j];\n            if (element) {\n              element.focus();\n              return element;\n            }\n          }\n        }\n      } else {\n        if (i < elements.length - 1) {\n          for (let j = i + 1; j < elements.length; j++) {\n            const element = elements[j];\n            if (element) {\n              element.focus();\n              return element;\n            }\n          }\n        }\n      }\n    }\n  }\n}\n"],"file":"helpers.js"}