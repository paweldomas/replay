{"version":3,"sources":["../../src/replay/components/player/RenderIfEnabled.js"],"names":["alreadyWarnedNames","analyzeChild","child","type","displayName","name","fullName","controlWithoutDisplayName","indexOf","console","warn","push","extractChildName","startIndex","charAt","toLowerCase","substr","RenderIfEnabled","React","Component","render","props","configuration","Children","map","children","process","env","NODE_ENV","childName","forEach"],"mappings":";;;;;;;AACA;;;;;;AAQA,MAAMA,kBAAkB,GAAG,EAA3B;;AAEA,MAAMC,YAAY,GAAGC,KAAK,IAAI;AAC5B,QAAMC,IAAI,GAAGD,KAAK,IAAIA,KAAK,CAACC,IAA5B;AACA,MAAIC,WAAW,GAAGD,IAAI,IAAID,KAAK,CAACC,IAAN,CAAWC,WAArC;AACA,QAAMC,IAAI,GAAGF,IAAI,IAAID,KAAK,CAACC,IAAN,CAAWE,IAAhC;AACA,MAAIC,QAAQ,GAAGD,IAAf;;AACA,MAAIA,IAAI,KAAK,kBAAb,EAAiC;AAC/BC,IAAAA,QAAQ,GAAGJ,KAAK,CAACC,IAAN,CAAWI,yBAAX,IAAwCF,IAAnD;AACD;;AACD,MAAI,CAACD,WAAD,KAAiB,CAACC,IAAD,IAASL,kBAAkB,CAACQ,OAAnB,CAA2BH,IAA3B,MAAqC,CAAC,CAAhE,CAAJ,EAAwE;AACtE;AACAI,IAAAA,OAAO,CAACC,IAAR,CACE,yHACE,gHAFJ,EAGEJ,QAAQ,IAAI,iBAHd,EAIED,IAAI,IAAI,iBAJV;;AAMA,QAAIA,IAAJ,EAAU;AACRL,MAAAA,kBAAkB,CAACW,IAAnB,CAAwBN,IAAxB;AACD;AACF;AACF,CApBD;;AAsBA,MAAMO,gBAAgB,GAAGV,KAAK,IAAI;AAChC,QAAMG,IAAI,GAAGH,KAAK,IAAIA,KAAK,CAACC,IAAf,KAAwBD,KAAK,CAACC,IAAN,CAAWC,WAAX,IAA0BF,KAAK,CAACC,IAAN,CAAWE,IAA7D,CAAb;;AACA,MAAIA,IAAJ,EAAU;AACR,QAAIQ,UAAU,GAAGR,IAAI,CAACG,OAAL,CAAa,WAAb,MAA8B,CAA9B,GAAkC,CAAlC,GAAsC,CAAvD;;AACA,QAAIH,IAAI,CAACG,OAAL,CAAa,iBAAb,MAAoCK,UAAxC,EAAoD;AAClDA,MAAAA,UAAU,IAAI,EAAd;AACD;;AACD,WAAOR,IAAI,CAACS,MAAL,CAAYD,UAAZ,EAAwBE,WAAxB,KAAwCV,IAAI,CAACW,MAAL,CAAYH,UAAU,GAAG,CAAzB,CAA/C;AACD;AACF,CATD;;AAWA,MAAMI,eAAN,SAA8BC,KAAK,CAACC,SAApC,CAAqD;AACnDC,EAAAA,MAAM,GAAG;AACP,QAAI,KAAKC,KAAL,CAAWC,aAAf,EAA8B;AAC5B,aAAOJ,KAAK,CAACK,QAAN,CAAeC,GAAf,CAAmB,KAAKH,KAAL,CAAWI,QAA9B,EAAwCvB,KAAK,IAAI;AACtD,YAAIwB,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,aAA7B,EAA4C;AAC1C3B,UAAAA,YAAY,CAACC,KAAD,CAAZ;AACD;;AACD,cAAM2B,SAAS,GAAGjB,gBAAgB,CAACV,KAAD,CAAlC;;AACA,YAAI,CAAC2B,SAAD,IAAe,KAAKR,KAAL,CAAWC,aAAX,IAA4B,KAAKD,KAAL,CAAWC,aAAX,CAAyBd,OAAzB,CAAiCqB,SAAjC,KAA+C,CAA9F,EAAkG;AAChG,iBAAO3B,KAAP;AACD;AACF,OARM,CAAP;AASD,KAVD,MAUO,IAAIwB,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,aAA7B,EAA4C;AACjDV,MAAAA,KAAK,CAACK,QAAN,CAAeO,OAAf,CAAuB,KAAKT,KAAL,CAAWI,QAAlC,EAA4CxB,YAA5C;AACA,aAAO,KAAKoB,KAAL,CAAWI,QAAlB;AACD,KAHM,MAGA;AACL,aAAO,KAAKJ,KAAL,CAAWI,QAAlB;AACD;AACF;;AAlBkD;;eAqBtCR,e","sourcesContent":["// @flow\nimport * as React from 'react';\nimport type { ControlNames } from '../../default-player/types';\n\ntype Props = {\n  children: React.Node,\n  configuration: ?Array<ControlNames>\n};\n\nconst alreadyWarnedNames = [];\n\nconst analyzeChild = child => {\n  const type = child && child.type;\n  let displayName = type && child.type.displayName;\n  const name = type && child.type.name;\n  let fullName = name;\n  if (name === 'ConnectedControl') {\n    fullName = child.type.controlWithoutDisplayName || name;\n  }\n  if (!displayName && (!name || alreadyWarnedNames.indexOf(name) === -1)) {\n    // eslint-disable-next-line no-console\n    console.warn(\n      '<RenderIfEnabled/> depends on child components having the displayName static property set. The component %s, has no ' +\n        'displayName property set. If no displayName is added to %s, the control might not render in production builds.',\n      fullName || '[no name found]',\n      name || '[no name found]'\n    );\n    if (name) {\n      alreadyWarnedNames.push(name);\n    }\n  }\n};\n\nconst extractChildName = child => {\n  const name = child && child.type && (child.type.displayName || child.type.name);\n  if (name) {\n    let startIndex = name.indexOf('Connected') === 0 ? 9 : 0;\n    if (name.indexOf('SettingsStorage') === startIndex) {\n      startIndex += 15;\n    }\n    return name.charAt(startIndex).toLowerCase() + name.substr(startIndex + 1);\n  }\n};\n\nclass RenderIfEnabled extends React.Component<Props> {\n  render() {\n    if (this.props.configuration) {\n      return React.Children.map(this.props.children, child => {\n        if (process.env.NODE_ENV === 'development') {\n          analyzeChild(child);\n        }\n        const childName = extractChildName(child);\n        if (!childName || (this.props.configuration && this.props.configuration.indexOf(childName) >= 0)) {\n          return child;\n        }\n      });\n    } else if (process.env.NODE_ENV === 'development') {\n      React.Children.forEach(this.props.children, analyzeChild);\n      return this.props.children;\n    } else {\n      return this.props.children;\n    }\n  }\n}\n\nexport default RenderIfEnabled;\n"],"file":"RenderIfEnabled.js"}